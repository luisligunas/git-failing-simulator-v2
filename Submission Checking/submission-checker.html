<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submission Checker - QA Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 3px; }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: #a1a1a1; }
        .image-zoom { transition: transform 0.3s ease; }
        .image-zoom:hover { transform: scale(1.02); }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .pulse-dot { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Top Navigation Bar -->
    <nav class="bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50">
        <div class="max-w-full mx-auto px-4">
            <div class="flex justify-between items-center h-14">
                <div class="flex items-center space-x-4">
                    <h1 class="text-lg font-semibold text-gray-800">QA Submission Checker</h1>
                    <span class="px-2 py-1 text-xs font-medium rounded-full" style="background-color: #AFCBFF;">PRICE CHECK</span>
                </div>

                <!-- Mission & Filter Info -->
                <div class="flex items-center space-x-6">
                    <div class="text-sm">
                        <span class="text-gray-500">Mission:</span>
                        <span class="font-medium text-gray-800">M06173 - Huff n' Puff 3.0</span>
                    </div>
                    <div class="text-sm">
                        <span class="text-gray-500">Run:</span>
                        <span class="font-medium text-gray-800">HUPU0048</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="filterByUserBtn" class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center space-x-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            <span>Filter by User</span>
                        </button>
                    </div>
                </div>

                <!-- Batch Processing Status -->
                <div id="batchStatus" class="flex items-center space-x-3">
                    <div id="processingIndicator" class="hidden flex items-center space-x-2 px-3 py-1.5 bg-blue-50 rounded-lg">
                        <div class="w-2 h-2 bg-blue-500 rounded-full pulse-dot"></div>
                        <span class="text-sm text-blue-700">Processing batch...</span>
                        <button onclick="showBatchDetails()" class="text-blue-600 hover:text-blue-800 text-sm underline">Details</button>
                    </div>
                    <div id="batchError" class="hidden flex items-center space-x-2 px-3 py-1.5 bg-red-50 rounded-lg cursor-pointer" onclick="showBatchDetails()">
                        <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-sm text-red-700">2 errors in last batch</span>
                    </div>
                </div>

                <!-- User Info -->
                <div class="flex items-center space-x-3">
                    <span class="text-sm text-gray-600">checker@company.com</span>
                    <div class="w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center text-white text-sm font-medium">C</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Progress Bar -->
    <div class="fixed top-14 left-0 right-0 z-40 bg-white border-b border-gray-200">
        <div class="max-w-full mx-auto px-4 py-2">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600">Batch Progress:</span>
                    <div class="flex items-center space-x-2">
                        <!-- Submission Pills -->
                        <div id="submissionPills" class="flex space-x-1">
                            <!-- Pills will be generated by JS -->
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-500" id="progressText">3 of 10 checked</span>
                    <button id="submitBatchBtn" class="px-4 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        Submit Batch (0/10)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="pt-28 pb-20">
        <div class="max-w-full mx-auto px-4">
            <div class="grid grid-cols-12 gap-4">

                <!-- Left Panel: Submission Info & Answers -->
                <div class="col-span-5 space-y-4">
                    <!-- Submission Header Card -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 border-b border-gray-100">
                            <div class="flex items-start justify-between">
                                <div>
                                    <div class="flex items-center space-x-2">
                                        <h2 class="text-lg font-semibold text-gray-800">Submission #202602092652150935</h2>
                                        <span class="px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full">APPROVED</span>
                                    </div>
                                    <p class="text-sm text-gray-500 mt-1">Submitted on Feb 9, 2026 at 12:51 PM</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-500">User Profile</p>
                                    <p class="font-medium text-gray-800">BFKJ87693581</p>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Stats -->
                        <div class="grid grid-cols-4 divide-x divide-gray-100">
                            <div class="p-3 text-center">
                                <p class="text-xs text-gray-500">Time Spent</p>
                                <p class="text-lg font-semibold text-gray-800">5m 45s</p>
                            </div>
                            <div class="p-3 text-center">
                                <p class="text-xs text-gray-500">Reward</p>
                                <p class="text-lg font-semibold text-gray-800">PHP 50</p>
                            </div>
                            <div class="p-3 text-center">
                                <p class="text-xs text-gray-500">Channel</p>
                                <p class="text-lg font-semibold text-gray-800">Android</p>
                            </div>
                            <div class="p-3 text-center">
                                <p class="text-xs text-gray-500">Store Type</p>
                                <p class="text-lg font-semibold text-gray-800">Retailer</p>
                            </div>
                        </div>
                    </div>

                    <!-- Backend-Provided Context Card -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                            <h3 class="font-medium text-gray-800 flex items-center">
                                <svg class="w-4 h-4 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Additional Context
                            </h3>
                            <button class="text-xs text-indigo-600 hover:text-indigo-800">Expand All</button>
                        </div>
                        <div class="p-4 space-y-3">
                            <!-- Reverse Geocode -->
                            <div class="p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <span class="text-xs font-medium text-gray-500 uppercase">Reverse Geocode (from image)</span>
                                    <span class="text-xs text-green-600 flex items-center">
                                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                        </svg>
                                        Matches declared
                                    </span>
                                </div>
                                <p class="text-sm text-gray-800 mt-1">San Roque, Angono, Rizal, Region 4A</p>
                                <p class="text-xs text-gray-500 mt-1">14.5685181, 121.0785391</p>
                            </div>

                            <!-- User Stats -->
                            <div class="p-3 bg-gray-50 rounded-lg">
                                <span class="text-xs font-medium text-gray-500 uppercase">User Statistics (This Mission)</span>
                                <div class="grid grid-cols-4 gap-2 mt-2">
                                    <div class="text-center">
                                        <p class="text-lg font-semibold text-gray-800">15</p>
                                        <p class="text-xs text-gray-500">Total</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-lg font-semibold text-green-600">12</p>
                                        <p class="text-xs text-gray-500">Approved</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-lg font-semibold text-red-600">2</p>
                                        <p class="text-xs text-gray-500">Rejected</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-lg font-semibold text-yellow-600">1</p>
                                        <p class="text-xs text-gray-500">Pending</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Distance Check -->
                            <div class="p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                <div class="flex items-start space-x-2">
                                    <svg class="w-4 h-4 text-yellow-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                    </svg>
                                    <div>
                                        <p class="text-sm font-medium text-yellow-800">Distance Warning</p>
                                        <p class="text-xs text-yellow-700 mt-0.5">Selfie image has no GPS data. Final selfie was taken from gallery (not camera).</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Answers Section -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 border-b border-gray-100 flex items-center justify-between sticky top-0 bg-white z-10">
                            <h3 class="font-medium text-gray-800">Submission Answers</h3>
                            <div class="flex items-center space-x-2">
                                <input type="text" placeholder="Search answers..." class="px-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 w-48">
                                <button class="p-1.5 text-gray-400 hover:text-gray-600 border border-gray-200 rounded-lg">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="max-h-96 overflow-y-auto scrollbar-thin">
                            <div class="divide-y divide-gray-100">
                                <!-- Store Information Group -->
                                <div class="p-3 bg-gray-50">
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Store Information</p>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Store Name</span>
                                    <span class="text-sm font-medium text-gray-800 text-right">BUTCH'S STORE</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Region</span>
                                    <span class="text-sm font-medium text-gray-800">Region 4A</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Province</span>
                                    <span class="text-sm font-medium text-gray-800">Rizal</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">City</span>
                                    <span class="text-sm font-medium text-gray-800">Angono</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Barangay</span>
                                    <span class="text-sm font-medium text-gray-800">San Roque</span>
                                </div>

                                <!-- Winston Group -->
                                <div class="p-3 bg-gray-50">
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Winston Products</p>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Has Winston</span>
                                    <span class="text-sm font-medium text-green-600">Oo (Yes)</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Winston Red - Selling</span>
                                    <span class="text-sm font-medium text-green-600">Oo (Yes)</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Winston Red - Price/Stick</span>
                                    <span class="text-sm font-medium text-gray-800">PHP 11</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Winston Red - Packs/Week</span>
                                    <span class="text-sm font-medium text-gray-800">10</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Winston Lights - Selling</span>
                                    <span class="text-sm font-medium text-green-600">Oo (Yes)</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Winston Lights - Price/Stick</span>
                                    <span class="text-sm font-medium text-gray-800">PHP 11</span>
                                </div>

                                <!-- More Products -->
                                <div class="p-3 bg-gray-50">
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Mighty Products</p>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Has Mighty</span>
                                    <span class="text-sm font-medium text-green-600">Oo (Yes)</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Mighty Green - Selling</span>
                                    <span class="text-sm font-medium text-green-600">Oo (Yes)</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Mighty Green - Price/Stick</span>
                                    <span class="text-sm font-medium text-gray-800">PHP 10</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Package Presence</span>
                                    <span class="text-sm font-medium text-red-600">Wala (None)</span>
                                </div>

                                <!-- Camel -->
                                <div class="p-3 bg-gray-50">
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Camel Products</p>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Has Camel</span>
                                    <span class="text-sm font-medium text-green-600">Oo (Yes)</span>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Camel Red - Price/Stick</span>
                                    <span class="text-sm font-medium text-gray-800">PHP 9</span>
                                </div>

                                <!-- Purchase Code -->
                                <div class="p-3 bg-gray-50">
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Verification</p>
                                </div>
                                <div class="p-3 flex justify-between items-start hover:bg-gray-50">
                                    <span class="text-sm text-gray-600">Purchase Code</span>
                                    <span class="text-sm font-medium text-indigo-600 font-mono">E9AR</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Middle Panel: Images -->
                <div class="col-span-4 space-y-4">
                    <!-- Images Gallery -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                            <h3 class="font-medium text-gray-800">Uploaded Images (4)</h3>
                            <button class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                View Full Screen
                            </button>
                        </div>
                        <div class="p-4 space-y-4 max-h-[600px] overflow-y-auto scrollbar-thin">
                            <!-- Image 1 -->
                            <div class="border border-gray-200 rounded-lg overflow-hidden">
                                <div class="relative">
                                    <img src="https://images.unsplash.com/photo-1604719312566-8912e9227c6a?w=800" alt="Store Selfie" class="w-full h-48 object-cover image-zoom cursor-pointer" onclick="openImageModal(this.src, 'Store Selfie')">
                                    <div class="absolute top-2 left-2 px-2 py-1 bg-black/70 text-white text-xs rounded">Store Selfie</div>
                                    <div class="absolute top-2 right-2 px-2 py-1 bg-yellow-500 text-white text-xs rounded flex items-center">
                                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                        </svg>
                                        Gallery
                                    </div>
                                </div>
                                <div class="p-3 bg-gray-50 text-xs text-gray-600">
                                    <div class="flex justify-between">
                                        <span>GPS: No data</span>
                                        <span>Feb 7, 2026 14:39</span>
                                    </div>
                                    <div class="text-gray-400 mt-1">TECNO KL4 | Timestamp Camera</div>
                                </div>
                            </div>

                            <!-- Image 2 -->
                            <div class="border border-gray-200 rounded-lg overflow-hidden">
                                <div class="relative">
                                    <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800" alt="Mighty Green Front" class="w-full h-48 object-cover image-zoom cursor-pointer" onclick="openImageModal(this.src, 'Mighty Green Front')">
                                    <div class="absolute top-2 left-2 px-2 py-1 bg-black/70 text-white text-xs rounded">Mighty Green - Front</div>
                                    <div class="absolute top-2 right-2 px-2 py-1 bg-green-500 text-white text-xs rounded flex items-center">
                                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                        </svg>
                                        Camera
                                    </div>
                                </div>
                                <div class="p-3 bg-gray-50 text-xs text-gray-600">
                                    <div class="flex justify-between">
                                        <span>GPS: 14.5685, 121.0785</span>
                                        <span>Feb 9, 2026 12:50</span>
                                    </div>
                                    <div class="text-gray-400 mt-1">TECNO KL4 | Camera</div>
                                </div>
                            </div>

                            <!-- Image 3 -->
                            <div class="border border-gray-200 rounded-lg overflow-hidden">
                                <div class="relative">
                                    <img src="https://images.unsplash.com/photo-1527525443983-cf80e8a81ca6?w=800" alt="Mighty Green Back" class="w-full h-48 object-cover image-zoom cursor-pointer" onclick="openImageModal(this.src, 'Mighty Green Back')">
                                    <div class="absolute top-2 left-2 px-2 py-1 bg-black/70 text-white text-xs rounded">Mighty Green - Back</div>
                                    <div class="absolute top-2 right-2 px-2 py-1 bg-green-500 text-white text-xs rounded flex items-center">
                                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                        </svg>
                                        Camera
                                    </div>
                                </div>
                                <div class="p-3 bg-gray-50 text-xs text-gray-600">
                                    <div class="flex justify-between">
                                        <span>GPS: 14.5685, 121.0785</span>
                                        <span>Feb 9, 2026 12:51</span>
                                    </div>
                                    <div class="text-gray-400 mt-1">TECNO KL4 | Camera</div>
                                </div>
                            </div>

                            <!-- Image 4 -->
                            <div class="border border-gray-200 rounded-lg overflow-hidden">
                                <div class="relative">
                                    <img src="https://images.unsplash.com/photo-1604719312566-8912e9227c6a?w=800" alt="Final Selfie" class="w-full h-48 object-cover image-zoom cursor-pointer" onclick="openImageModal(this.src, 'Final Selfie')">
                                    <div class="absolute top-2 left-2 px-2 py-1 bg-black/70 text-white text-xs rounded">Final Selfie</div>
                                    <div class="absolute top-2 right-2 px-2 py-1 bg-yellow-500 text-white text-xs rounded flex items-center">
                                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                        </svg>
                                        Gallery
                                    </div>
                                </div>
                                <div class="p-3 bg-gray-50 text-xs text-gray-600">
                                    <div class="flex justify-between">
                                        <span>GPS: No data</span>
                                        <span>Feb 7, 2026 14:39</span>
                                    </div>
                                    <div class="text-gray-400 mt-1">TECNO KL4 | Timestamp Camera</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Data Entry (QA Lead Defined) -->
                    <div id="additionalDataSection" class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                            <h3 class="font-medium text-gray-800 flex items-center">
                                <svg class="w-4 h-4 mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                                </svg>
                                Data Collection (For Reports)
                            </h3>
                            <span class="text-xs text-gray-400">Not visible to submitter</span>
                        </div>
                        <div class="p-4 space-y-4">
                            <!-- Product Image Analysis -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mighty Green - Front Image State</label>
                                <div class="flex space-x-2">
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="img1State" value="okay" class="sr-only peer">
                                        <div class="p-2 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:text-green-700 hover:bg-gray-50">
                                            Okay
                                        </div>
                                    </label>
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="img1State" value="damaged" class="sr-only peer">
                                        <div class="p-2 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-yellow-500 peer-checked:bg-yellow-50 peer-checked:text-yellow-700 hover:bg-gray-50">
                                            Damaged
                                        </div>
                                    </label>
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="img1State" value="fake" class="sr-only peer">
                                        <div class="p-2 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-red-500 peer-checked:bg-red-50 peer-checked:text-red-700 hover:bg-gray-50">
                                            Fake
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mighty Green - Back Image State</label>
                                <div class="flex space-x-2">
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="img2State" value="okay" class="sr-only peer">
                                        <div class="p-2 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:text-green-700 hover:bg-gray-50">
                                            Okay
                                        </div>
                                    </label>
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="img2State" value="damaged" class="sr-only peer">
                                        <div class="p-2 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-yellow-500 peer-checked:bg-yellow-50 peer-checked:text-yellow-700 hover:bg-gray-50">
                                            Damaged
                                        </div>
                                    </label>
                                    <label class="flex-1 cursor-pointer">
                                        <input type="radio" name="img2State" value="fake" class="sr-only peer">
                                        <div class="p-2 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-red-500 peer-checked:bg-red-50 peer-checked:text-red-700 hover:bg-gray-50">
                                            Fake
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Store Visibility Rating</label>
                                <select class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    <option value="">Select rating...</option>
                                    <option value="excellent">Excellent - Very visible</option>
                                    <option value="good">Good - Visible</option>
                                    <option value="fair">Fair - Partially visible</option>
                                    <option value="poor">Poor - Barely visible</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel: Decision Panel -->
                <div class="col-span-3 space-y-4">
                    <!-- Mode Toggle -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-medium text-gray-800">Checking Mode</h3>
                                <span id="modeIndicator" class="px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-full">Rule-Based</span>
                            </div>
                            <div class="flex p-1 bg-gray-100 rounded-lg">
                                <button id="ruleBasedBtn" onclick="switchMode('rule')" class="flex-1 px-3 py-2 text-sm font-medium rounded-md bg-white shadow text-gray-800">
                                    Rule-Based
                                </button>
                                <button id="manualBtn" onclick="switchMode('manual')" class="flex-1 px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-800">
                                    Manual
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Rule-Based Checking -->
                    <div id="ruleBasedPanel" class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 border-b border-gray-100">
                            <h3 class="font-medium text-gray-800 flex items-center">
                                <svg class="w-4 h-4 mr-2 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Violation Checklist
                            </h3>
                            <p class="text-xs text-gray-500 mt-1">Check items that apply. Status will be determined automatically.</p>
                        </div>
                        <div class="p-4 space-y-3 max-h-64 overflow-y-auto scrollbar-thin">
                            <label class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mt-0.5 w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" onchange="updateRuleStatus()">
                                <div>
                                    <span class="text-sm text-gray-800 group-hover:text-gray-900">Selfie image from gallery</span>
                                    <p class="text-xs text-gray-500">Image was not taken live using camera</p>
                                </div>
                            </label>
                            <label class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mt-0.5 w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" onchange="updateRuleStatus()">
                                <div>
                                    <span class="text-sm text-gray-800 group-hover:text-gray-900">No GPS data in image</span>
                                    <p class="text-xs text-gray-500">Location cannot be verified from image metadata</p>
                                </div>
                            </label>
                            <label class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mt-0.5 w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" onchange="updateRuleStatus()">
                                <div>
                                    <span class="text-sm text-gray-800 group-hover:text-gray-900">Location mismatch</span>
                                    <p class="text-xs text-gray-500">Declared location doesn't match GPS coordinates</p>
                                </div>
                            </label>
                            <label class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mt-0.5 w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" onchange="updateRuleStatus()">
                                <div>
                                    <span class="text-sm text-gray-800 group-hover:text-gray-900">Blurry product image</span>
                                    <p class="text-xs text-gray-500">Product details are not clearly visible</p>
                                </div>
                            </label>
                            <label class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mt-0.5 w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" onchange="updateRuleStatus()">
                                <div>
                                    <span class="text-sm text-gray-800 group-hover:text-gray-900">Suspicious user activity</span>
                                    <p class="text-xs text-gray-500">Multiple similar submissions from same user</p>
                                </div>
                            </label>
                            <label class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mt-0.5 w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-500" onchange="updateRuleStatus()">
                                <div>
                                    <span class="text-sm text-gray-800 group-hover:text-gray-900">Price seems unrealistic</span>
                                    <p class="text-xs text-gray-500">Reported prices are outside expected range</p>
                                </div>
                            </label>
                        </div>

                        <!-- Computed Status Display -->
                        <div class="p-4 border-t border-gray-100 bg-gray-50">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Computed Status:</span>
                                <span id="computedStatus" class="px-3 py-1 text-sm font-medium bg-green-100 text-green-700 rounded-full">APPROVED</span>
                            </div>
                        </div>

                        <!-- Additional Issue -->
                        <div class="p-4 border-t border-gray-100">
                            <button onclick="toggleCustomIssue()" class="w-full px-3 py-2 text-sm text-indigo-600 border border-indigo-200 rounded-lg hover:bg-indigo-50 flex items-center justify-center">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                                Add Custom Issue
                            </button>
                            <div id="customIssueInput" class="hidden mt-3">
                                <textarea placeholder="Describe the additional issue..." class="w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none" rows="2"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Manual Mode Panel (Hidden by default) -->
                    <div id="manualPanel" class="hidden bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 border-b border-gray-100">
                            <h3 class="font-medium text-gray-800">Manual Status Selection</h3>
                            <p class="text-xs text-gray-500 mt-1">Select status and configure reward if needed</p>
                        </div>
                        <div class="p-4 space-y-4">
                            <!-- Status Selection -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                                <div class="grid grid-cols-2 gap-2">
                                    <label class="cursor-pointer">
                                        <input type="radio" name="manualStatus" value="approved" class="sr-only peer" onchange="toggleRewardInputs()">
                                        <div class="p-3 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:text-green-700 hover:bg-gray-50">
                                            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                            </svg>
                                            Approved
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="manualStatus" value="rejected" class="sr-only peer" onchange="toggleRewardInputs()">
                                        <div class="p-3 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-red-500 peer-checked:bg-red-50 peer-checked:text-red-700 hover:bg-gray-50">
                                            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                            </svg>
                                            Rejected
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="manualStatus" value="unqualified" class="sr-only peer" onchange="toggleRewardInputs()">
                                        <div class="p-3 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-yellow-500 peer-checked:bg-yellow-50 peer-checked:text-yellow-700 hover:bg-gray-50">
                                            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                            Unqualified
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="manualStatus" value="restricted" class="sr-only peer" onchange="toggleRewardInputs()">
                                        <div class="p-3 text-center text-sm border-2 border-gray-200 rounded-lg peer-checked:border-purple-500 peer-checked:bg-purple-50 peer-checked:text-purple-700 hover:bg-gray-50">
                                            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"/>
                                            </svg>
                                            Restricted
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Custom Reward (shown for approved/unqualified) -->
                            <div id="customRewardSection" class="hidden space-y-3">
                                <div class="p-3 bg-blue-50 rounded-lg">
                                    <p class="text-xs text-blue-700 font-medium">Custom reward available for Approved/Unqualified status</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Custom Reward Amount</label>
                                    <div class="flex">
                                        <span class="inline-flex items-center px-3 text-sm text-gray-600 bg-gray-100 border border-r-0 border-gray-200 rounded-l-lg">PHP</span>
                                        <input type="number" placeholder="50" class="flex-1 px-3 py-2 text-sm border border-gray-200 rounded-r-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Reward Type</label>
                                    <select class="w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                        <option value="cash">Cash</option>
                                        <option value="points">Points</option>
                                        <option value="voucher">Voucher</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Remarks -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Remarks</label>
                                <textarea placeholder="Optional remarks..." class="w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none" rows="2"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4 space-y-3">
                            <button onclick="confirmSubmission()" class="w-full px-4 py-2.5 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 flex items-center justify-center">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                                Confirm Decision
                            </button>

                            <div class="grid grid-cols-2 gap-3">
                                <button onclick="skipSubmission()" class="px-4 py-2 text-gray-700 font-medium border border-gray-200 rounded-lg hover:bg-gray-50 flex items-center justify-center">
                                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"/>
                                    </svg>
                                    Skip
                                </button>
                                <button onclick="reserveSubmission()" class="px-4 py-2 text-orange-700 font-medium border border-orange-200 bg-orange-50 rounded-lg hover:bg-orange-100 flex items-center justify-center">
                                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                                    </svg>
                                    Reserve
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Checked By Info (for already checked submissions) -->
                    <div id="checkedByInfo" class="hidden bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                        <div class="p-4">
                            <h3 class="text-sm font-medium text-gray-600 mb-2">Previously Checked</h3>
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-medium">J</div>
                                <div>
                                    <p class="text-sm font-medium text-gray-800">john.checker@company.com</p>
                                    <p class="text-xs text-gray-500">Feb 9, 2026 at 2:30 PM</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <div class="flex items-center justify-between">
                        <button onclick="previousSubmission()" class="px-4 py-2 text-gray-600 hover:text-gray-800 flex items-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                            Previous
                        </button>
                        <span class="text-sm text-gray-500">4 of 10</span>
                        <button onclick="nextSubmission()" class="px-4 py-2 text-gray-600 hover:text-gray-800 flex items-center">
                            Next
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Image Modal -->
    <div id="imageModal" class="hidden fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4">
        <div class="relative max-w-4xl max-h-full">
            <button onclick="closeImageModal()" class="absolute -top-10 right-0 text-white hover:text-gray-300">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
            <img id="modalImage" src="" alt="" class="max-h-[80vh] rounded-lg">
            <p id="modalCaption" class="text-center text-white mt-2"></p>
        </div>
    </div>

    <!-- Batch Details Modal -->
    <div id="batchModal" class="hidden fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] overflow-hidden">
            <div class="p-4 border-b border-gray-200 flex items-center justify-between">
                <h3 class="font-semibold text-gray-800">Batch Processing Status</h3>
                <button onclick="closeBatchModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="p-4 overflow-y-auto max-h-96">
                <div class="space-y-3">
                    <!-- Success items -->
                    <div class="p-3 bg-green-50 border border-green-200 rounded-lg flex items-start space-x-3">
                        <svg class="w-5 h-5 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <div>
                            <p class="text-sm font-medium text-green-800">8 submissions updated successfully</p>
                            <p class="text-xs text-green-600 mt-0.5">Ref: 202602092652150935, 202602092652150936, ...</p>
                        </div>
                    </div>

                    <!-- Error items -->
                    <div class="p-3 bg-red-50 border border-red-200 rounded-lg">
                        <div class="flex items-start space-x-3">
                            <svg class="w-5 h-5 text-red-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                            </svg>
                            <div>
                                <p class="text-sm font-medium text-red-800">202602092652150940 - Failed</p>
                                <p class="text-xs text-red-600 mt-0.5">Error: Submission already processed by another checker</p>
                            </div>
                        </div>
                        <div class="mt-2 flex space-x-2">
                            <button class="px-2 py-1 text-xs text-red-700 border border-red-300 rounded hover:bg-red-100">Retry</button>
                            <button class="px-2 py-1 text-xs text-gray-600 border border-gray-300 rounded hover:bg-gray-100">Skip</button>
                        </div>
                    </div>

                    <div class="p-3 bg-red-50 border border-red-200 rounded-lg">
                        <div class="flex items-start space-x-3">
                            <svg class="w-5 h-5 text-red-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                            </svg>
                            <div>
                                <p class="text-sm font-medium text-red-800">202602092652150941 - Failed</p>
                                <p class="text-xs text-red-600 mt-0.5">Error: Network timeout. Please retry.</p>
                            </div>
                        </div>
                        <div class="mt-2 flex space-x-2">
                            <button class="px-2 py-1 text-xs text-red-700 border border-red-300 rounded hover:bg-red-100">Retry</button>
                            <button class="px-2 py-1 text-xs text-gray-600 border border-gray-300 rounded hover:bg-gray-100">Skip</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-4 border-t border-gray-200 flex justify-end space-x-2">
                <button onclick="retryAllFailed()" class="px-4 py-2 text-sm text-indigo-600 border border-indigo-200 rounded-lg hover:bg-indigo-50">Retry All Failed</button>
                <button onclick="closeBatchModal()" class="px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">Close</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="hidden fixed inset-0 z-50 bg-white/80 flex items-center justify-center">
        <div class="text-center">
            <div class="w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto"></div>
            <p class="mt-4 text-gray-600 font-medium">Loading next batch...</p>
            <p class="text-sm text-gray-400 mt-1">Fetching submissions 11-20</p>
        </div>
    </div>

    <!-- Empty State Overlay -->
    <div id="emptyState" class="hidden fixed inset-0 z-40 bg-gray-100 flex items-center justify-center" style="top: 6rem;">
        <div class="text-center max-w-md">
            <div class="w-24 h-24 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center">
                <svg class="w-12 h-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <h2 class="text-2xl font-semibold text-gray-800 mb-2">All Caught Up!</h2>
            <p class="text-gray-600 mb-6">There are no more submissions to check for this mission at the moment.</p>
            <div class="space-y-3">
                <button class="px-6 py-2.5 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700">
                    Check Another Mission
                </button>
                <button class="block mx-auto px-6 py-2 text-gray-600 hover:text-gray-800">
                    View Reserved Submissions
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="hidden fixed bottom-6 right-6 z-50 slide-up">
        <div class="bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-3">
            <svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <span id="toastMessage">Decision confirmed!</span>
        </div>
    </div>

    <script>
        // Sample data for submissions
        const submissions = [
            { id: 1, refno: '202602092652150931', status: 'checked', decision: 'approved' },
            { id: 2, refno: '202602092652150932', status: 'checked', decision: 'rejected' },
            { id: 3, refno: '202602092652150933', status: 'checked', decision: 'approved' },
            { id: 4, refno: '202602092652150934', status: 'current', decision: null },
            { id: 5, refno: '202602092652150935', status: 'pending', decision: null },
            { id: 6, refno: '202602092652150936', status: 'pending', decision: null },
            { id: 7, refno: '202602092652150937', status: 'pending', decision: null },
            { id: 8, refno: '202602092652150938', status: 'pending', decision: null },
            { id: 9, refno: '202602092652150939', status: 'skipped', decision: null },
            { id: 10, refno: '202602092652150940', status: 'pending', decision: null },
        ];

        let currentIndex = 3;
        let checkedCount = 3;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderSubmissionPills();
            updateProgress();
        });

        function renderSubmissionPills() {
            const container = document.getElementById('submissionPills');
            container.innerHTML = submissions.map((sub, idx) => {
                let bgColor, textColor, icon;

                switch(sub.status) {
                    case 'checked':
                        if (sub.decision === 'approved') {
                            bgColor = 'bg-green-500';
                            icon = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>';
                        } else if (sub.decision === 'rejected') {
                            bgColor = 'bg-red-500';
                            icon = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>';
                        } else {
                            bgColor = 'bg-yellow-500';
                            icon = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01"/>';
                        }
                        break;
                    case 'current':
                        bgColor = 'bg-indigo-500 ring-2 ring-indigo-300 ring-offset-2';
                        icon = '';
                        break;
                    case 'skipped':
                        bgColor = 'bg-gray-300';
                        icon = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"/>';
                        break;
                    default:
                        bgColor = 'bg-gray-200';
                        icon = '';
                }

                return `
                    <button onclick="goToSubmission(${idx})" class="w-8 h-8 ${bgColor} rounded-full flex items-center justify-center text-white text-xs font-medium hover:opacity-80 transition-opacity" title="${sub.refno}">
                        ${icon ? `<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">${icon}</svg>` : (idx + 1)}
                    </button>
                `;
            }).join('');
        }

        function updateProgress() {
            checkedCount = submissions.filter(s => s.status === 'checked').length;
            document.getElementById('progressText').textContent = `${checkedCount} of 10 checked`;

            const btn = document.getElementById('submitBatchBtn');
            btn.textContent = `Submit Batch (${checkedCount}/10)`;
            btn.disabled = checkedCount < 10;
        }

        function goToSubmission(index) {
            submissions[currentIndex].status = submissions[currentIndex].status === 'current' ? 'pending' : submissions[currentIndex].status;
            currentIndex = index;
            submissions[currentIndex].status = 'current';
            renderSubmissionPills();
            // Here you would load the actual submission data
            showToast('Loaded submission #' + submissions[index].refno);
        }

        function switchMode(mode) {
            const ruleBtn = document.getElementById('ruleBasedBtn');
            const manualBtn = document.getElementById('manualBtn');
            const rulePanel = document.getElementById('ruleBasedPanel');
            const manualPanel = document.getElementById('manualPanel');
            const modeIndicator = document.getElementById('modeIndicator');

            if (mode === 'rule') {
                ruleBtn.classList.add('bg-white', 'shadow', 'text-gray-800');
                ruleBtn.classList.remove('text-gray-600');
                manualBtn.classList.remove('bg-white', 'shadow', 'text-gray-800');
                manualBtn.classList.add('text-gray-600');
                rulePanel.classList.remove('hidden');
                manualPanel.classList.add('hidden');
                modeIndicator.textContent = 'Rule-Based';
                modeIndicator.classList.remove('bg-purple-100', 'text-purple-700');
                modeIndicator.classList.add('bg-blue-100', 'text-blue-700');
            } else {
                manualBtn.classList.add('bg-white', 'shadow', 'text-gray-800');
                manualBtn.classList.remove('text-gray-600');
                ruleBtn.classList.remove('bg-white', 'shadow', 'text-gray-800');
                ruleBtn.classList.add('text-gray-600');
                manualPanel.classList.remove('hidden');
                rulePanel.classList.add('hidden');
                modeIndicator.textContent = 'Manual';
                modeIndicator.classList.remove('bg-blue-100', 'text-blue-700');
                modeIndicator.classList.add('bg-purple-100', 'text-purple-700');
            }
        }

        function updateRuleStatus() {
            const checkboxes = document.querySelectorAll('#ruleBasedPanel input[type="checkbox"]:checked');
            const statusEl = document.getElementById('computedStatus');

            if (checkboxes.length === 0) {
                statusEl.textContent = 'APPROVED';
                statusEl.className = 'px-3 py-1 text-sm font-medium bg-green-100 text-green-700 rounded-full';
            } else if (checkboxes.length <= 2) {
                statusEl.textContent = 'UNQUALIFIED';
                statusEl.className = 'px-3 py-1 text-sm font-medium bg-yellow-100 text-yellow-700 rounded-full';
            } else if (checkboxes.length <= 4) {
                statusEl.textContent = 'REJECTED';
                statusEl.className = 'px-3 py-1 text-sm font-medium bg-red-100 text-red-700 rounded-full';
            } else {
                statusEl.textContent = 'RESTRICTED';
                statusEl.className = 'px-3 py-1 text-sm font-medium bg-purple-100 text-purple-700 rounded-full';
            }
        }

        function toggleRewardInputs() {
            const status = document.querySelector('input[name="manualStatus"]:checked')?.value;
            const rewardSection = document.getElementById('customRewardSection');

            if (status === 'approved' || status === 'unqualified') {
                rewardSection.classList.remove('hidden');
            } else {
                rewardSection.classList.add('hidden');
            }
        }

        function toggleCustomIssue() {
            const input = document.getElementById('customIssueInput');
            input.classList.toggle('hidden');
        }

        function confirmSubmission() {
            submissions[currentIndex].status = 'checked';
            submissions[currentIndex].decision = 'approved';
            renderSubmissionPills();
            updateProgress();
            showToast('Decision confirmed!');

            // Auto-advance to next unchecked
            setTimeout(() => {
                const nextPending = submissions.findIndex((s, i) => i > currentIndex && s.status === 'pending');
                if (nextPending !== -1) {
                    goToSubmission(nextPending);
                }
            }, 500);
        }

        function skipSubmission() {
            submissions[currentIndex].status = 'skipped';
            renderSubmissionPills();
            showToast('Submission skipped');

            // Auto-advance
            const nextPending = submissions.findIndex((s, i) => i > currentIndex && s.status === 'pending');
            if (nextPending !== -1) {
                goToSubmission(nextPending);
            }
        }

        function reserveSubmission() {
            showToast('Submission reserved for later');
            // Would call separate API here
        }

        function previousSubmission() {
            if (currentIndex > 0) {
                goToSubmission(currentIndex - 1);
            }
        }

        function nextSubmission() {
            if (currentIndex < submissions.length - 1) {
                goToSubmission(currentIndex + 1);
            }
        }

        function openImageModal(src, caption) {
            document.getElementById('modalImage').src = src;
            document.getElementById('modalCaption').textContent = caption;
            document.getElementById('imageModal').classList.remove('hidden');
        }

        function closeImageModal() {
            document.getElementById('imageModal').classList.add('hidden');
        }

        function showBatchDetails() {
            document.getElementById('batchModal').classList.remove('hidden');
        }

        function closeBatchModal() {
            document.getElementById('batchModal').classList.add('hidden');
        }

        function retryAllFailed() {
            showToast('Retrying failed submissions...');
            closeBatchModal();
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 3000);
        }

        // Demo functions
        function showLoadingDemo() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.add('hidden');
            }, 2000);
        }

        function showEmptyStateDemo() {
            document.getElementById('emptyState').classList.toggle('hidden');
        }

        function showProcessingDemo() {
            document.getElementById('processingIndicator').classList.toggle('hidden');
        }

        function showErrorDemo() {
            document.getElementById('batchError').classList.toggle('hidden');
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') previousSubmission();
            if (e.key === 'ArrowRight') nextSubmission();
            if (e.key === 'Enter' && e.ctrlKey) confirmSubmission();
            if (e.key === 's' && e.ctrlKey) { e.preventDefault(); skipSubmission(); }
            if (e.key === 'Escape') {
                closeImageModal();
                closeBatchModal();
            }
        });

        // Close modals on outside click
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) closeImageModal();
        });
        document.getElementById('batchModal').addEventListener('click', function(e) {
            if (e.target === this) closeBatchModal();
        });
    </script>

    <!-- Demo Controls (for testing) -->
    <div class="fixed bottom-4 left-4 z-40 bg-white rounded-lg shadow-lg border border-gray-200 p-3">
        <p class="text-xs font-medium text-gray-500 mb-2 uppercase">Demo Controls</p>
        <div class="flex flex-wrap gap-2">
            <button onclick="showLoadingDemo()" class="px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200">Loading</button>
            <button onclick="showEmptyStateDemo()" class="px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200">Empty State</button>
            <button onclick="showProcessingDemo()" class="px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200">Processing</button>
            <button onclick="showErrorDemo()" class="px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200">Batch Error</button>
            <button onclick="document.getElementById('checkedByInfo').classList.toggle('hidden')" class="px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200">Checked By</button>
        </div>
        <p class="text-xs text-gray-400 mt-2">Shortcuts: / navigate, Ctrl+Enter confirm, Ctrl+S skip</p>
    </div>
</body>
</html>
